# ç¬¬9ç« ï¼šå¤šæœåŠ¡å™¨é›†ç¾¤éƒ¨ç½²

> ğŸ¯ å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡OpenClawçš„å¤šæœåŠ¡å™¨éƒ¨ç½²æ¶æ„ï¼Œå®ç°é«˜å¯ç”¨å’Œæ°´å¹³æ‰©å±•

## ğŸ—ï¸ **ä¸ºä»€ä¹ˆéœ€è¦å¤šæœåŠ¡å™¨éƒ¨ç½²ï¼Ÿ**

### **å•æœåŠ¡å™¨çš„é™åˆ¶**
- ğŸ”¥ **æ€§èƒ½ç“¶é¢ˆ**: å•æœºèµ„æºæœ‰é™ï¼Œæ— æ³•æ”¯æ’‘å¤§é‡å¹¶å‘
- ğŸ’¥ **å•ç‚¹æ•…éšœ**: æœåŠ¡å™¨æ•…éšœå¯¼è‡´æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨  
- ğŸ“ˆ **æ‰©å±•å›°éš¾**: å‚ç›´æ‰©å±•æˆæœ¬é«˜ï¼Œæ°´å¹³æ‰©å±•ä¸å¯è¡Œ
- ğŸŒ **åœ°ç†é™åˆ¶**: æ— æ³•å°±è¿‘æœåŠ¡å…¨çƒç”¨æˆ·
- ğŸ”’ **å®‰å…¨é£é™©**: æ‰€æœ‰æœåŠ¡é›†ä¸­åœ¨ä¸€å°æœºå™¨ä¸Š

### **å¤šæœåŠ¡å™¨çš„ä»·å€¼**
- âš¡ **é«˜æ€§èƒ½**: åˆ†å¸ƒå¼è®¡ç®—ï¼Œå¹¶è¡Œå¤„ç†å¤§é‡è¯·æ±‚
- ğŸ›¡ï¸ **é«˜å¯ç”¨**: æœåŠ¡å™¨æ•…éšœä¸å½±å“æ•´ä½“å¯ç”¨æ€§
- ğŸ“Š **æ°´å¹³æ‰©å±•**: æ ¹æ®è´Ÿè½½åŠ¨æ€æ·»åŠ æœåŠ¡å™¨
- ğŸŒ **åœ°ç†åˆ†å¸ƒ**: å…¨çƒéƒ¨ç½²ï¼Œå°±è¿‘æœåŠ¡ç”¨æˆ·
- ğŸ” **å®‰å…¨éš”ç¦»**: ä¸åŒæœåŠ¡è¿è¡Œåœ¨éš”ç¦»çš„ç¯å¢ƒä¸­

---

## ğŸ›ï¸ **å¤šæœåŠ¡å™¨æ¶æ„è®¾è®¡**

### **æ¶æ„æ¨¡å¼1: åŠŸèƒ½åˆ†ç¦»å‹**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Gateway       â”‚  â”‚   Agent Farm    â”‚  â”‚   Service       â”‚
â”‚   Server        â”‚  â”‚   Server        â”‚  â”‚   Server        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Load Balancer â”‚  â”‚ â€¢ Agent-1       â”‚  â”‚ â€¢ Database      â”‚
â”‚ â€¢ API Gateway   â”‚  â”‚ â€¢ Agent-2       â”‚  â”‚ â€¢ File Storage  â”‚
â”‚ â€¢ Auth Service  â”‚  â”‚ â€¢ Agent-3       â”‚  â”‚ â€¢ Message Queue â”‚
â”‚ â€¢ Rate Limiting â”‚  â”‚ â€¢ Agent-4       â”‚  â”‚ â€¢ Cache         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Monitoring    â”‚  â”‚   Tools &       â”‚  â”‚   Backup &      â”‚ 
â”‚   Server        â”‚  â”‚   Analytics     â”‚  â”‚   Archive       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Metrics       â”‚  â”‚ â€¢ Search Engine â”‚  â”‚ â€¢ Backup Jobs   â”‚
â”‚ â€¢ Logging       â”‚  â”‚ â€¢ Analytics     â”‚  â”‚ â€¢ Archive       â”‚
â”‚ â€¢ Alerting      â”‚  â”‚ â€¢ Reporting     â”‚  â”‚ â€¢ Disaster      â”‚
â”‚ â€¢ Health Check  â”‚  â”‚ â€¢ ML Pipeline   â”‚  â”‚   Recovery      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **æ¶æ„æ¨¡å¼2: åœ°ç†åˆ†å¸ƒå‹**
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Global CDN    â”‚
                    â”‚  & Load Balancerâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚  US-East     â”‚     â”‚    EU-Central   â”‚     â”‚  Asia-Pacificâ”‚
â”‚  Region      â”‚     â”‚    Region       â”‚     â”‚   Region     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Gateway      â”‚     â”‚ Gateway         â”‚     â”‚ Gateway      â”‚
â”‚ Agent Farm   â”‚     â”‚ Agent Farm      â”‚     â”‚ Agent Farm   â”‚
â”‚ Services     â”‚     â”‚ Services        â”‚     â”‚ Services     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Global State   â”‚
                    â”‚  Sync Service   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **æ¶æ„æ¨¡å¼3: å¾®æœåŠ¡åŒ–**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service Mesh                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚Gateway  â”‚  â”‚ Agent   â”‚  â”‚ Session â”‚  â”‚  Tool   â”‚    â”‚
â”‚  â”‚Service  â”‚  â”‚Manager  â”‚  â”‚Manager  â”‚  â”‚Service  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚Channel  â”‚  â”‚Memory   â”‚  â”‚ Config  â”‚  â”‚Monitor  â”‚    â”‚
â”‚  â”‚Service  â”‚  â”‚Service  â”‚  â”‚Service  â”‚  â”‚Service  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                Infrastructure                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚Database â”‚  â”‚Message  â”‚  â”‚Storage  â”‚  â”‚  Cache  â”‚    â”‚
â”‚  â”‚Cluster  â”‚  â”‚ Queue   â”‚  â”‚Cluster  â”‚  â”‚Cluster  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ **å®æˆ˜ï¼š3æœåŠ¡å™¨é›†ç¾¤éƒ¨ç½²**

è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªå®é™…çš„3æœåŠ¡å™¨OpenClawé›†ç¾¤ï¼š

### **æœåŠ¡å™¨è§„åˆ’**

| æœåŠ¡å™¨ | è§’è‰² | è§„æ ¼ | ç»„ä»¶ |
|--------|------|------|------|
| **Server-1** | Gateway + LB | 4æ ¸8GB | ç½‘å…³ã€è´Ÿè½½å‡è¡¡ã€è®¤è¯ |
| **Server-2** | Agent Farm | 8æ ¸16GB | ä¸»è¦Agentå®ä¾‹ |
| **Server-3** | Services | 4æ ¸8GB | æ•°æ®åº“ã€ç¼“å­˜ã€å­˜å‚¨ |

### **ç½‘ç»œæ¶æ„**
```
Internet
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load        â”‚
â”‚ Balancer    â”‚  â† Nginx/HAProxy
â”‚ (Server-1)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OpenClaw    â”‚    â”‚ OpenClaw    â”‚
â”‚ Gateway     â”‚    â”‚ Agents      â”‚
â”‚ (Server-1)  â”‚â—„â”€â”€â–ºâ”‚ (Server-2)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚        â”‚
                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”
                    â”‚   Services     â”‚
                    â”‚  â€¢ PostgreSQL  â”‚
                    â”‚  â€¢ Redis       â”‚
                    â”‚  â€¢ File Store  â”‚
                    â”‚  (Server-3)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ **éƒ¨ç½²å®æ–½æŒ‡å—**

### **æ­¥éª¤1: æœåŠ¡å™¨å‡†å¤‡**

#### **åŸºç¡€ç¯å¢ƒé…ç½® (æ‰€æœ‰æœåŠ¡å™¨)**
```bash
#!/bin/bash
# setup-base.sh - åŸºç¡€ç¯å¢ƒé…ç½®è„šæœ¬

# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…åŸºç¡€è½¯ä»¶
sudo apt install -y \
    curl wget git vim htop \
    docker.io docker-compose \
    nginx certbot \
    postgresql-client redis-tools

# é…ç½®Docker
sudo usermod -aG docker $USER
sudo systemctl enable docker
sudo systemctl start docker

# å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs

# å®‰è£…OpenClaw
sudo npm install -g @openclaw/openclaw

# åˆ›å»ºOpenClawç”¨æˆ·
sudo useradd -m -s /bin/bash openclaw
sudo mkdir -p /home/openclaw/.openclaw
sudo chown -R openclaw:openclaw /home/openclaw/.openclaw

# é…ç½®é˜²ç«å¢™
sudo ufw allow ssh
sudo ufw allow 80
sudo ufw allow 443
sudo ufw allow 18789  # OpenClaw Gateway
sudo ufw --force enable

echo "åŸºç¡€ç¯å¢ƒé…ç½®å®Œæˆ"
```

### **æ­¥éª¤2: Server-1 (Gateway) é…ç½®**

#### **è´Ÿè½½å‡è¡¡é…ç½®**
```nginx
# /etc/nginx/sites-available/openclaw
upstream openclaw_gateway {
    least_conn;
    server 127.0.0.1:18789 max_fails=3 fail_timeout=30s;
    server SERVER-2-IP:18789 max_fails=3 fail_timeout=30s backup;
}

server {
    listen 80;
    server_name your-domain.com;
    
    # é‡å®šå‘åˆ°HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    
    # SSLé…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers off;
    
    # å®‰å…¨å¤´
    add_header Strict-Transport-Security "max-age=63072000" always;
    add_header X-Frame-Options DENY always;
    add_header X-Content-Type-Options nosniff always;
    
    # é™æµ
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
    limit_req zone=api burst=20 nodelay;
    
    location / {
        proxy_pass http://openclaw_gateway;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # è¶…æ—¶é…ç½®
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 300s;
        
        # ç¼“å†²é…ç½®
        proxy_buffering on;
        proxy_buffer_size 128k;
        proxy_buffers 4 256k;
        proxy_busy_buffers_size 256k;
    }
    
    # å¥åº·æ£€æŸ¥ç«¯ç‚¹
    location /health {
        access_log off;
        proxy_pass http://openclaw_gateway/health;
    }
    
    # é™æ€æ–‡ä»¶
    location /static/ {
        alias /var/www/openclaw/static/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### **Gatewayé…ç½®æ–‡ä»¶**
```json
{
  "gateway": {
    "port": 18789,
    "bind": "all",
    "cors": {
      "enabled": true,
      "origins": ["https://your-domain.com"]
    },
    "rateLimit": {
      "enabled": true,
      "windowMs": 60000,
      "max": 100
    },
    "cluster": {
      "enabled": true,
      "mode": "gateway",
      "peers": [
        "http://SERVER-2-IP:18789",
        "http://SERVER-3-IP:18789"
      ]
    }
  },
  "agents": [
    {
      "id": "coordinator",
      "name": "ä¸»åè°ƒå‘˜",
      "model": "anthropic/claude-sonnet-4-20250514",
      "workspace": {"root": "./agents/coordinator"},
      "cluster": {
        "enabled": true,
        "sticky": false,
        "replicas": 2
      }
    }
  ],
  "database": {
    "type": "postgresql",
    "host": "SERVER-3-IP",
    "port": 5432,
    "database": "openclaw",
    "username": "openclaw",
    "password": "SECURE_PASSWORD",
    "pool": {
      "min": 2,
      "max": 10
    }
  },
  "cache": {
    "type": "redis",
    "host": "SERVER-3-IP", 
    "port": 6379,
    "password": "REDIS_PASSWORD"
  },
  "auth": {
    "profiles": [
      {"id": "anthropic", "provider": "anthropic"}
    ]
  },
  "monitoring": {
    "enabled": true,
    "metrics": {
      "enabled": true,
      "port": 9090
    },
    "logging": {
      "level": "info",
      "destination": "file",
      "path": "/var/log/openclaw/"
    }
  }
}
```

### **æ­¥éª¤3: Server-2 (Agent Farm) é…ç½®**

#### **Agentä¸“ç”¨é…ç½®**
```json
{
  "gateway": {
    "port": 18789,
    "bind": "all",
    "cluster": {
      "enabled": true,
      "mode": "agent",
      "primary": "SERVER-1-IP:18789"
    }
  },
  "agents": [
    {
      "id": "email-manager",
      "name": "é‚®ä»¶ç®¡ç†å‘˜",
      "model": "anthropic/claude-sonnet-4-20250514",
      "workspace": {"root": "./agents/email-manager"},
      "resources": {
        "memory": "2GB",
        "cpu": "2"
      }
    },
    {
      "id": "calendar-manager", 
      "name": "æ—¥ç¨‹ç®¡ç†å‘˜",
      "model": "anthropic/claude-sonnet-4-20250514",
      "workspace": {"root": "./agents/calendar-manager"},
      "resources": {
        "memory": "1.5GB",
        "cpu": "1.5"
      }
    },
    {
      "id": "doc-processor",
      "name": "æ–‡æ¡£å¤„ç†å™¨",
      "model": "anthropic/claude-sonnet-4-20250514", 
      "workspace": {"root": "./agents/doc-processor"},
      "resources": {
        "memory": "3GB",
        "cpu": "2.5"
      }
    },
    {
      "id": "data-analyst",
      "name": "æ•°æ®åˆ†æå¸ˆ",
      "model": "anthropic/claude-sonnet-4-20250514",
      "workspace": {"root": "./agents/data-analyst"}, 
      "resources": {
        "memory": "4GB",
        "cpu": "3"
      }
    }
  ],
  "database": {
    "type": "postgresql",
    "host": "SERVER-3-IP",
    "port": 5432,
    "database": "openclaw",
    "username": "openclaw",
    "password": "SECURE_PASSWORD"
  },
  "cache": {
    "type": "redis",
    "host": "SERVER-3-IP",
    "port": 6379
  }
}
```

#### **èµ„æºç›‘æ§è„šæœ¬**
```python
# resource-monitor.py - AgentæœåŠ¡å™¨èµ„æºç›‘æ§
import psutil
import json
import time
import logging
from datetime import datetime

class ResourceMonitor:
    def __init__(self, threshold_cpu=80, threshold_memory=85):
        self.threshold_cpu = threshold_cpu
        self.threshold_memory = threshold_memory
        
    def get_system_stats(self):
        """è·å–ç³»ç»Ÿèµ„æºç»Ÿè®¡"""
        return {
            "timestamp": datetime.now().isoformat(),
            "cpu": {
                "percent": psutil.cpu_percent(interval=1),
                "count": psutil.cpu_count(),
                "load_avg": psutil.getloadavg()
            },
            "memory": {
                "total": psutil.virtual_memory().total,
                "available": psutil.virtual_memory().available,
                "percent": psutil.virtual_memory().percent,
                "used": psutil.virtual_memory().used
            },
            "disk": {
                "total": psutil.disk_usage('/').total,
                "used": psutil.disk_usage('/').used,
                "free": psutil.disk_usage('/').free,
                "percent": psutil.disk_usage('/').percent
            },
            "network": {
                "bytes_sent": psutil.net_io_counters().bytes_sent,
                "bytes_recv": psutil.net_io_counters().bytes_recv
            }
        }
        
    def check_agent_processes(self):
        """æ£€æŸ¥OpenClaw Agentè¿›ç¨‹"""
        agents = []
        for proc in psutil.process_iter(['pid', 'name', 'cmdline', 'cpu_percent', 'memory_info']):
            try:
                if 'openclaw' in ' '.join(proc.info['cmdline'] or []):
                    agents.append({
                        "pid": proc.info['pid'],
                        "name": proc.info['name'],
                        "cpu_percent": proc.info['cpu_percent'],
                        "memory_mb": proc.info['memory_info'].rss / 1024 / 1024,
                        "cmdline": ' '.join(proc.info['cmdline'] or [])
                    })
            except (psutil.NoSuchProcess, psutil.AccessDenied):
                pass
                
        return agents
        
    def check_alerts(self, stats):
        """æ£€æŸ¥æ˜¯å¦éœ€è¦å‘Šè­¦"""
        alerts = []
        
        if stats["cpu"]["percent"] > self.threshold_cpu:
            alerts.append({
                "type": "cpu_high",
                "message": f"CPUä½¿ç”¨ç‡è¿‡é«˜: {stats['cpu']['percent']:.1f}%",
                "severity": "warning"
            })
            
        if stats["memory"]["percent"] > self.threshold_memory:
            alerts.append({
                "type": "memory_high", 
                "message": f"å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜: {stats['memory']['percent']:.1f}%",
                "severity": "warning"
            })
            
        if stats["disk"]["percent"] > 90:
            alerts.append({
                "type": "disk_full",
                "message": f"ç£ç›˜ç©ºé—´ä¸è¶³: {stats['disk']['percent']:.1f}%",
                "severity": "critical"
            })
            
        return alerts
        
    def run_monitoring_loop(self, interval=60):
        """è¿è¡Œç›‘æ§å¾ªç¯"""
        while True:
            try:
                stats = self.get_system_stats()
                agents = self.check_agent_processes()
                alerts = self.check_alerts(stats)
                
                report = {
                    "system": stats,
                    "agents": agents,
                    "alerts": alerts
                }
                
                # è®°å½•åˆ°æ—¥å¿—
                logging.info(f"Resource Report: {json.dumps(report)}")
                
                # å¦‚æœæœ‰å‘Šè­¦ï¼Œå‘é€é€šçŸ¥
                if alerts:
                    self.send_alerts(alerts)
                    
                time.sleep(interval)
                
            except Exception as e:
                logging.error(f"Monitoring error: {e}")
                time.sleep(10)
                
    def send_alerts(self, alerts):
        """å‘é€å‘Šè­¦é€šçŸ¥"""
        # è¿™é‡Œå¯ä»¥é›†æˆå„ç§é€šçŸ¥æ–¹å¼ï¼šé‚®ä»¶ã€Slackã€é’‰é’‰ç­‰
        for alert in alerts:
            print(f"ğŸš¨ ALERT: {alert['message']}")
            
if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO)
    monitor = ResourceMonitor()
    monitor.run_monitoring_loop()
```

### **æ­¥éª¤4: Server-3 (Services) é…ç½®**

#### **æ•°æ®åº“è®¾ç½®**
```sql
-- setup-database.sql
-- åˆ›å»ºOpenClawæ•°æ®åº“å’Œç”¨æˆ·

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE openclaw;

-- åˆ›å»ºç”¨æˆ·
CREATE USER openclaw WITH PASSWORD 'SECURE_PASSWORD';

-- æˆæƒ
GRANT ALL PRIVILEGES ON DATABASE openclaw TO openclaw;

-- è¿æ¥åˆ°openclawæ•°æ®åº“
\c openclaw

-- åˆ›å»ºæ‰©å±•
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_stat_statements";

-- åˆ›å»ºè¡¨ç»“æ„
CREATE TABLE IF NOT EXISTS agents (
    id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    config JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS sessions (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    agent_id VARCHAR(50) NOT NULL,
    user_id VARCHAR(100),
    channel VARCHAR(50),
    context JSONB,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (agent_id) REFERENCES agents(id)
);

CREATE TABLE IF NOT EXISTS messages (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    session_id UUID NOT NULL,
    role VARCHAR(20) NOT NULL,
    content TEXT NOT NULL,
    metadata JSONB,
    created_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_sessions_agent_id ON sessions(agent_id);
CREATE INDEX idx_sessions_user_id ON sessions(user_id);  
CREATE INDEX idx_messages_session_id ON messages(session_id);
CREATE INDEX idx_messages_created_at ON messages(created_at);

-- åˆ›å»ºè§†å›¾
CREATE VIEW agent_stats AS
SELECT 
    a.id,
    a.name,
    COUNT(DISTINCT s.id) as session_count,
    COUNT(m.id) as message_count,
    MAX(s.updated_at) as last_activity
FROM agents a
LEFT JOIN sessions s ON a.id = s.agent_id
LEFT JOIN messages m ON s.id = m.session_id
GROUP BY a.id, a.name;

GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO openclaw;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO openclaw;
```

#### **Redisé…ç½®**
```redis
# /etc/redis/redis.conf

# åŸºç¡€é…ç½®
port 6379
bind 0.0.0.0
protected-mode yes
requirepass REDIS_PASSWORD

# æŒä¹…åŒ–
save 900 1
save 300 10
save 60 10000
rdbcompression yes
dbfilename dump.rdb
dir /var/lib/redis

# æ—¥å¿—
loglevel notice
logfile /var/log/redis/redis-server.log

# å†…å­˜ç®¡ç†
maxmemory 2gb
maxmemory-policy allkeys-lru

# ç½‘ç»œ
tcp-keepalive 300
timeout 0

# æ€§èƒ½
tcp-backlog 511
databases 16

# å®‰å…¨
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command SHUTDOWN SHUTDOWN_REDIS
```

#### **æ–‡ä»¶å­˜å‚¨é…ç½®**
```yaml
# docker-compose.yml - æ–‡ä»¶å­˜å‚¨æœåŠ¡
version: '3.8'

services:
  minio:
    image: minio/minio:latest
    container_name: openclaw-storage
    environment:
      MINIO_ROOT_USER: openclaw
      MINIO_ROOT_PASSWORD: SECURE_STORAGE_PASSWORD
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - /data/minio:/data
    command: server /data --console-address ":9001"
    restart: unless-stopped

  nginx-storage:
    image: nginx:alpine
    container_name: openclaw-storage-proxy
    ports:
      - "8080:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - /data/files:/usr/share/nginx/html/files:ro
    depends_on:
      - minio
    restart: unless-stopped
```

---

## ğŸ”„ **æœåŠ¡ç¼–æ’å’Œè‡ªåŠ¨åŒ–**

### **Docker Composeå…¨æ ˆéƒ¨ç½²**
```yaml
# docker-compose.production.yml
version: '3.8'

networks:
  openclaw-net:
    driver: bridge

services:
  # è´Ÿè½½å‡è¡¡å™¨
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx:/etc/nginx
      - ./ssl:/etc/ssl
    depends_on:
      - gateway-1
      - gateway-2
    networks:
      - openclaw-net
    restart: unless-stopped

  # Gatewayå®ä¾‹
  gateway-1:
    image: openclaw/gateway:latest
    environment:
      - NODE_ENV=production
      - OPENCLAW_CONFIG=/app/config/gateway.json
      - DATABASE_URL=postgresql://openclaw:password@postgres:5432/openclaw
      - REDIS_URL=redis://redis:6379
    volumes:
      - ./config/gateway-1.json:/app/config/gateway.json
      - ./data/gateway-1:/app/data
    networks:
      - openclaw-net
    restart: unless-stopped

  gateway-2:
    image: openclaw/gateway:latest
    environment:
      - NODE_ENV=production  
      - OPENCLAW_CONFIG=/app/config/gateway.json
      - DATABASE_URL=postgresql://openclaw:password@postgres:5432/openclaw
      - REDIS_URL=redis://redis:6379
    volumes:
      - ./config/gateway-2.json:/app/config/gateway.json
      - ./data/gateway-2:/app/data
    networks:
      - openclaw-net
    restart: unless-stopped

  # Agentå®ä¾‹
  agent-farm:
    image: openclaw/agents:latest
    deploy:
      replicas: 3
    environment:
      - NODE_ENV=production
      - OPENCLAW_CONFIG=/app/config/agents.json
      - DATABASE_URL=postgresql://openclaw:password@postgres:5432/openclaw
      - REDIS_URL=redis://redis:6379
    volumes:
      - ./config/agents.json:/app/config/agents.json
      - ./data/agents:/app/data
    networks:
      - openclaw-net
    restart: unless-stopped

  # æ•°æ®åº“
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=openclaw
      - POSTGRES_USER=openclaw
      - POSTGRES_PASSWORD=SECURE_PASSWORD
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init-db.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - openclaw-net
    restart: unless-stopped

  # ç¼“å­˜
  redis:
    image: redis:7-alpine
    command: redis-server --requirepass REDIS_PASSWORD
    volumes:
      - redis_data:/data
    networks:
      - openclaw-net
    restart: unless-stopped

  # ç›‘æ§
  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    networks:
      - openclaw-net
    restart: unless-stopped

  grafana:
    image: grafana/grafana:latest
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=GRAFANA_PASSWORD
    volumes:
      - grafana_data:/var/lib/grafana
      - ./monitoring/grafana:/etc/grafana/provisioning
    networks:
      - openclaw-net
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
  prometheus_data:
  grafana_data:
```

### **è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬**
```bash
#!/bin/bash
# deploy.sh - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

set -e

# é…ç½®å˜é‡
SERVERS=("SERVER-1-IP" "SERVER-2-IP" "SERVER-3-IP")
SSH_USER="openclaw"
SSH_KEY="~/.ssh/openclaw-deploy"

# é¢œè‰²è¾“å‡º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

log_info() { echo -e "${GREEN}[INFO]${NC} $1"; }
log_warn() { echo -e "${YELLOW}[WARN]${NC} $1"; }
log_error() { echo -e "${RED}[ERROR]${NC} $1"; }

# æ£€æŸ¥å‰ç½®æ¡ä»¶
check_prerequisites() {
    log_info "æ£€æŸ¥éƒ¨ç½²å‰ç½®æ¡ä»¶..."
    
    # æ£€æŸ¥SSHè¿æ¥
    for server in "${SERVERS[@]}"; do
        if ! ssh -i $SSH_KEY -o ConnectTimeout=5 $SSH_USER@$server "echo 'SSH OK'" &>/dev/null; then
            log_error "æ— æ³•SSHè¿æ¥åˆ° $server"
            exit 1
        fi
    done
    
    # æ£€æŸ¥Docker
    for server in "${SERVERS[@]}"; do
        if ! ssh -i $SSH_KEY $SSH_USER@$server "docker --version" &>/dev/null; then
            log_error "$server ä¸Šæœªå®‰è£…Docker"
            exit 1
        fi
    done
    
    log_info "å‰ç½®æ¡ä»¶æ£€æŸ¥é€šè¿‡"
}

# ä¸Šä¼ é…ç½®æ–‡ä»¶
upload_configs() {
    log_info "ä¸Šä¼ é…ç½®æ–‡ä»¶..."
    
    # ä¸Šä¼ åˆ°GatewayæœåŠ¡å™¨
    scp -i $SSH_KEY -r config/gateway/ $SSH_USER@${SERVERS[0]}:~/openclaw/
    scp -i $SSH_KEY -r config/nginx/ $SSH_USER@${SERVERS[0]}:~/openclaw/
    
    # ä¸Šä¼ åˆ°AgentæœåŠ¡å™¨  
    scp -i $SSH_KEY -r config/agents/ $SSH_USER@${SERVERS[1]}:~/openclaw/
    
    # ä¸Šä¼ åˆ°ServicesæœåŠ¡å™¨
    scp -i $SSH_KEY -r config/database/ $SSH_USER@${SERVERS[2]}:~/openclaw/
    scp -i $SSH_KEY docker-compose.services.yml $SSH_USER@${SERVERS[2]}:~/openclaw/
    
    log_info "é…ç½®æ–‡ä»¶ä¸Šä¼ å®Œæˆ"
}

# éƒ¨ç½²ServicesæœåŠ¡å™¨
deploy_services() {
    log_info "éƒ¨ç½²ServicesæœåŠ¡å™¨..."
    
    ssh -i $SSH_KEY $SSH_USER@${SERVERS[2]} << 'EOF'
        cd ~/openclaw
        docker-compose -f docker-compose.services.yml down
        docker-compose -f docker-compose.services.yml pull
        docker-compose -f docker-compose.services.yml up -d
        
        # ç­‰å¾…æ•°æ®åº“å¯åŠ¨
        sleep 30
        
        # åˆå§‹åŒ–æ•°æ®åº“
        docker-compose -f docker-compose.services.yml exec -T postgres psql -U openclaw -d openclaw -f /docker-entrypoint-initdb.d/init.sql
EOF
    
    log_info "ServicesæœåŠ¡å™¨éƒ¨ç½²å®Œæˆ"
}

# éƒ¨ç½²AgentæœåŠ¡å™¨
deploy_agents() {
    log_info "éƒ¨ç½²AgentæœåŠ¡å™¨..."
    
    ssh -i $SSH_KEY $SSH_USER@${SERVERS[1]} << 'EOF'
        cd ~/openclaw
        
        # åœæ­¢ç°æœ‰æœåŠ¡
        openclaw gateway stop 2>/dev/null || true
        
        # æ›´æ–°OpenClaw
        sudo npm update -g @openclaw/openclaw
        
        # å¯åŠ¨AgentæœåŠ¡
        openclaw gateway start --config agents/config.json --daemon
        
        # éªŒè¯å¯åŠ¨
        sleep 10
        openclaw status
EOF
    
    log_info "AgentæœåŠ¡å™¨éƒ¨ç½²å®Œæˆ"  
}

# éƒ¨ç½²GatewayæœåŠ¡å™¨
deploy_gateway() {
    log_info "éƒ¨ç½²GatewayæœåŠ¡å™¨..."
    
    ssh -i $SSH_KEY $SSH_USER@${SERVERS[0]} << 'EOF'
        cd ~/openclaw
        
        # æ›´æ–°Nginxé…ç½®
        sudo cp nginx/openclaw.conf /etc/nginx/sites-available/
        sudo ln -sf /etc/nginx/sites-available/openclaw.conf /etc/nginx/sites-enabled/
        sudo nginx -t
        sudo systemctl reload nginx
        
        # åœæ­¢ç°æœ‰æœåŠ¡
        openclaw gateway stop 2>/dev/null || true
        
        # æ›´æ–°OpenClaw
        sudo npm update -g @openclaw/openclaw
        
        # å¯åŠ¨GatewayæœåŠ¡
        openclaw gateway start --config gateway/config.json --daemon
        
        # éªŒè¯å¯åŠ¨
        sleep 10
        openclaw status
        curl -f http://localhost:18789/health || exit 1
EOF
    
    log_info "GatewayæœåŠ¡å™¨éƒ¨ç½²å®Œæˆ"
}

# å¥åº·æ£€æŸ¥
health_check() {
    log_info "æ‰§è¡Œå¥åº·æ£€æŸ¥..."
    
    # æ£€æŸ¥å„æœåŠ¡çŠ¶æ€
    for server in "${SERVERS[@]}"; do
        log_info "æ£€æŸ¥ $server çŠ¶æ€..."
        ssh -i $SSH_KEY $SSH_USER@$server "openclaw status" || log_warn "$server çŠ¶æ€å¼‚å¸¸"
    done
    
    # æ£€æŸ¥è´Ÿè½½å‡è¡¡
    if curl -f https://your-domain.com/health &>/dev/null; then
        log_info "è´Ÿè½½å‡è¡¡å¥åº·æ£€æŸ¥é€šè¿‡"
    else
        log_warn "è´Ÿè½½å‡è¡¡å¥åº·æ£€æŸ¥å¤±è´¥"
    fi
    
    log_info "å¥åº·æ£€æŸ¥å®Œæˆ"
}

# ä¸»éƒ¨ç½²æµç¨‹
main() {
    log_info "å¼€å§‹OpenClawé›†ç¾¤éƒ¨ç½²..."
    
    check_prerequisites
    upload_configs
    deploy_services
    sleep 60  # ç­‰å¾…æœåŠ¡å¯åŠ¨
    deploy_agents
    sleep 30
    deploy_gateway
    sleep 30
    health_check
    
    log_info "ğŸ‰ OpenClawé›†ç¾¤éƒ¨ç½²å®Œæˆï¼"
    echo
    echo "è®¿é—®åœ°å€: https://your-domain.com"
    echo "ç›‘æ§é¢æ¿: https://your-domain.com:3000"
    echo "APIæ–‡æ¡£: https://your-domain.com/docs"
}

# è¿è¡Œéƒ¨ç½²
main "$@"
```

---

## ğŸ“Š **ç›‘æ§å’Œè¿ç»´**

### **Prometheusç›‘æ§é…ç½®**
```yaml
# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "rules/*.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093

scrape_configs:
  - job_name: 'openclaw-gateway'
    static_configs:
      - targets: ['SERVER-1-IP:9090', 'SERVER-2-IP:9090']
    metrics_path: /metrics
    scrape_interval: 30s

  - job_name: 'openclaw-agents'
    static_configs:
      - targets: ['SERVER-2-IP:9091']
    metrics_path: /agents/metrics
    scrape_interval: 30s

  - job_name: 'system'
    static_configs:
      - targets: ['SERVER-1-IP:9100', 'SERVER-2-IP:9100', 'SERVER-3-IP:9100']

  - job_name: 'postgres'
    static_configs:
      - targets: ['SERVER-3-IP:9187']

  - job_name: 'redis'
    static_configs:
      - targets: ['SERVER-3-IP:9121']
```

### **å‘Šè­¦è§„åˆ™**
```yaml
# rules/openclaw.yml
groups:
  - name: openclaw
    rules:
      - alert: GatewayDown
        expr: up{job="openclaw-gateway"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "OpenClaw Gateway is down"
          description: "Gateway on {{ $labels.instance }} has been down for more than 1 minute"

      - alert: HighResponseTime
        expr: openclaw_request_duration_seconds{quantile="0.95"} > 5
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High response time detected"
          description: "95th percentile response time is {{ $value }}s on {{ $labels.instance }}"

      - alert: HighErrorRate
        expr: rate(openclaw_requests_total{status=~"5.."}[5m]) > 0.1
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "High error rate detected"
          description: "Error rate is {{ $value }} on {{ $labels.instance }}"

      - alert: AgentMemoryHigh
        expr: openclaw_agent_memory_usage_bytes / 1024 / 1024 / 1024 > 4
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Agent memory usage high"
          description: "Agent {{ $labels.agent_id }} is using {{ $value }}GB memory"
```

---

## âœ… **æœ¬ç« æ€»ç»“**

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡ï¼š

- [x] å¤šæœåŠ¡å™¨æ¶æ„è®¾è®¡çš„æ ¸å¿ƒæ¦‚å¿µå’Œæ¨¡å¼
- [x] 3æœåŠ¡å™¨é›†ç¾¤çš„å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ
- [x] è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨é…ç½®
- [x] æ•°æ®åº“é›†ç¾¤å’Œç¼“å­˜é…ç½®
- [x] è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®ç®¡ç†
- [x] ç›‘æ§å‘Šè­¦ä½“ç³»æ­å»º
- [x] è¿ç»´å’Œæ•…éšœå¤„ç†æµç¨‹

---

## ğŸš€ **ä¸‹ä¸€æ­¥**

æŒæ¡äº†å¤šæœåŠ¡å™¨éƒ¨ç½²åï¼Œä½ å¯ä»¥ç»§ç»­å­¦ä¹ ï¼š

**[ä¸‹ä¸€ç« ï¼šå®¹å™¨åŒ–å’Œç¼–æ’ â†’](../10-containerization/README.md)**

æ·±å…¥äº†è§£Kubernetesé›†ç¾¤éƒ¨ç½²å’Œå®¹å™¨ç¼–æ’æŠ€æœ¯ã€‚

---

## ğŸ“ **æ‰©å±•ç»ƒä¹ **

1. **é«˜å¯ç”¨å®è·µ**: æ¨¡æ‹ŸæœåŠ¡å™¨æ•…éšœï¼Œæµ‹è¯•è‡ªåŠ¨åˆ‡æ¢
2. **æ€§èƒ½è°ƒä¼˜**: ä½¿ç”¨å‹æµ‹å·¥å…·æµ‹è¯•é›†ç¾¤æ€§èƒ½æé™  
3. **ç¾å¤‡æ¼”ç»ƒ**: å®æ–½å®Œæ•´çš„å¤‡ä»½å’Œæ¢å¤æµç¨‹
4. **å¤šåœ°åŸŸéƒ¨ç½²**: æ‰©å±•åˆ°è·¨åœ°åŸŸçš„å…¨çƒåŒ–éƒ¨ç½²
5. **ç›‘æ§ä¼˜åŒ–**: å»ºç«‹å®Œæ•´çš„SREç›‘æ§ä½“ç³»

**å‡†å¤‡å¥½æŒ‘æˆ˜æ›´å¤§è§„æ¨¡çš„ä¼ä¸šçº§éƒ¨ç½²äº†å—ï¼Ÿ** ğŸ¯